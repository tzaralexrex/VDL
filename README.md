# VDL
Universal video downloader

Универсальный загрузчик видео с различных сайтов.  
Фактически - "обёртка" к yt-dlp, соответственно, теоретически поддерживает все сайты, которые умеет обрабатывать yt-dlp (https://github.com/yt-dlp/yt-dlp/blob/master/supportedsites.md).  
Авторизация на сайтах - с помощью cookie из браузера. Желательно сохранить их отдельно в формате Netscape.  
Требует для работы импорт yt-dlp, browser-cookie3, colorama, psutil, brotli, pycryptodomex (устанавливает автоматически), а также ffmpeg рядом или по системному пути.  

Управляющие переменные и пути - в начале скрипта после блока импортов, при желании можно править.  

DEBUG = 1  # Глобальная переменная для включения/выключения отладки (1/0)  
DEBUG_FILE = 'debug.log' # Имя файла журнала отладки  
DEBUG_APPEND = 1 # 0 = перезаписывать лог при каждом запуске, 1 = дописывать к существующему логу  
MAX_RETRIES = 15  # Максимум попыток повторной загрузки при обрывах  
CHECK_VER = 1  # 1 = проверять версии зависимостей, 0 = только наличие модулей  
В аргументах функции import_or_update флаг force_check, при установке в True функция игнорирует флаг CHECK_VER для данного вызова:  
    yt_dlp = import_or_update('yt_dlp', force_check=True) - этот модуль часто обновляется, в связи с изменениями требований видеосервисов  
Скрипт понимает передачу ссылки в командной строке. Желательно ссылку обёртывать кавычками, иначе система может посчитать аргументы ссылки за аргументы вызова:  
    vdl.py "ссылка"  
При выборе позиций плейлиста для скачивания скрипт понимает диапазоны номеров и конечный открытый диапазон, например, если в плейлисте 30 файлов, а при запросе задано:  
1, 4, 7-10, 15, 27-  
то скрипт скачает видео с номерами 1, 4, 7, 8, 9, 10, 15, 27, 28, 29, 30  
При нахождении открытого диапазона не на последнем месте скрипт пытается его распознать как закрытый, используя следующее число, как конец диапазона.  
При запросе имени файла скрипт копирует предлагаемое имя в буфер обмена, чтобы его можно было вставить и поправить - удобно, когда надо внести минимальные изменения в имя, чтобы не набивать руками или не копировать специально  
При выборе выходного формата mkv скрипт предложить интегрировать скачанные субтитры и главы внутрь контейнера.  
В аргументах функции print_playlist_paginated (вывод плейлиста постранично) - переменные page_size - количество одновременно выводимых записей плейлиста, по умолчанию 20 и timeout - время ожидания до вывода следующей страницы, по умолчанию 10 секунд.  
Если во время ожидания нажать Space — таймер останавливается, ждёт только Enter.  

В планах - добавление аргументов командной строки для большей автоматизации.  
